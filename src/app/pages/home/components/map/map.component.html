<div class="map-container flex flex-grow relative">
  <div class="map z-0" leaflet (leafletMapReady)="onMapReady($event)"></div>
  <div
    class="zoom-display absolute top-20 left-3 z-10 bg-white p-0.5 text-center shadow-md rounded border-2 border-black border-opacity-35">
    <div
      class="flex flex-col align-middle justify-center gap-2">
      <mat-icon>search</mat-icon>
      {{ currentZoomLevel }}
    </div>
  </div>
  <div
    class="search-bar absolute top-0 left-1/2 transform -translate-x-1/2 mt-2 z-10 w-[60vw] max-w-xl">
    <div class="flex flex-col gap-1 items-stretch justify-stretch">
      <mat-form-field class="w-full opacity-85  text-opacity-100 placeholder-opacity-100">
        <input [formControl]="searchControl" [matAutocomplete]="auto" matInput
               placeholder="Search Location"
               type="search">
      </mat-form-field>
      <div *ngIf="summitsLayerVisible">
        <div *ngIf="currentZoomLevel >= DETAILED_ZOOM_LEVEL; else
      zoomTooLowContent"
             class="elevation-filters flex flex-col md:flex-row gap-2 align-top justify-between w-full">
          <mat-form-field appearance="fill"
                          class="w-full opacity-85  text-opacity-100 placeholder-opacity-100">
            <mat-label>Min Elevation (m)</mat-label>
            <input [formControl]="minElevationControl" matInput max="9000"
                   min="100" step="100" type="number"/>
            <button (click)="clearMinElevationFilter()" aria-label="Clear" mat-icon-button
                    matSuffix>
              <mat-icon>close</mat-icon>
            </button>
          </mat-form-field>
          <mat-form-field appearance="fill"
                          class="w-full opacity-85  text-opacity-100 placeholder-opacity-100">
            <mat-label>Max Elevation (m)</mat-label>
            <input [formControl]="maxElevationControl" matInput max="9000"
                   min="100" step="100" type="number"/>
            <button (click)="clearMaxElevationFilter()" aria-label="Clear" mat-icon-button
                    matSuffix>
              <mat-icon>close</mat-icon>
            </button>
          </mat-form-field>
        </div>
        <ng-template #zoomTooLowContent>
          <div class="flex w-full justify-center align-middle">
            <mat-card
              class="w-fit p-2 text-white opacity-75  text-opacity-100">
              <div class="flex gap-2 flex-row align-baseline">
                <mat-icon>zoom_in</mat-icon>
                Zoom in for summits!
              </div>
            </mat-card>
          </div>
        </ng-template>
      </div>
    </div>
    <mat-autocomplete #auto="matAutocomplete"
                      (optionSelected)="onOptionSelected($event)"
                      [displayWith]="displaySelectedOption">
      <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
        <span>{{ option.country_code }} - {{ option.name }}</span>
        <span> - </span>
        <span *ngIf="option.admin1">{{option.admin1}}, </span>
        <span *ngIf="option.country">{{option.country}}</span>
        <span *ngIf="option.elevation">, {{option.elevation}} m</span>
      </mat-option>
    </mat-autocomplete>
  </div>
</div>
